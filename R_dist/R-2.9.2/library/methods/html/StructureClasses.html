<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Classes Corresponding to Basic Structures</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for StructureClasses {methods}"><tr><td>StructureClasses {methods}</td><td align="right">R Documentation</td></tr></table>
<h2>Classes Corresponding to Basic Structures</h2>


<h3>Description</h3>

<p>
The virtual class <code>structure</code> and classes that
extend it are formal classes analogous to S language structures such
as arrays and time-series.
</p>


<h3>Usage</h3>

<pre>
## The following class names can appear in method signatures,
## as the class in as() and is() expressions, and, except for
## the classes commented as VIRTUAL, in calls to new()

"matrix"
"array"
"ts"

"structure" ## VIRTUAL
</pre>


<h3>Objects from the Classes</h3>

<p>
Objects can be created by calls of the form <code>new(Class, ...)</code>,
where <code>Class</code> is the quoted name of the specific class (e.g.,
<code>"matrix"</code>), and the other arguments, if any, are interpreted as
arguments to the corresponding function, e.g., to function
<code>matrix()</code>.  There is no particular advantage over calling those
functions directly, unless you are writing software designed to work
for multiple classes, perhaps with the class name and the arguments
passed in.
</p>
<p>
Objects created from the classes <code>"matrix"</code> and <code>"array"</code> are unusual, to put
it mildly, and have been for some time.  Although they may appear to
be objects from these classes, they do not have the internal
structure of either an S3 or S4 class object.  In particular, they
have no <code>"class"</code> attribute and are not recognized as objects
with classes (that is, both <code><a href="../../base/html/is.object.html">is.object</a></code> and
<code><a href="../../base/html/isS4.html">isS4</a></code> will return <code>FALSE</code> for such objects).
</p>
<p>
That the objects still behave as if they came from the corresponding
class (most of the time, anyway) results from special code
recognizing such objects being built into the base code of <font face="Courier New,Courier" color="#666666"><b>R</b></font>.
For most purposes, treating the classes in the usual way will work,
fortunately.  One consequence of the special treatment is that these
two classes<EM>may</EM> be used as the data part of an S4 class; for
example, you can get away with <code>contains = "matrix"</code> in a call
to <code><a href="setGeneric.html">setGeneric</a></code> to create an S4 class that is a subclass
of <code>"matrix"</code>.  There is no guarantee that everything will work
perfectly, but a number of classes have been written in this form
successfully.
</p>
<p>
The class <code>"ts"</code>  is basically an S3 class
that has been registered with S4, using the
<code><a href="setOldClass.html">setOldClass</a></code> mechanism.  Versions of <font face="Courier New,Courier" color="#666666"><b>R</b></font> through 2.7.0
treated this class as a pure S4 class, which was in principal a good
idea, but in practice did not allow subclasses to be defined and had
other intrinsic problems.  (For example, setting the
<code>"tsp"</code> parameters as a slot often fails because the built-in
implementation does not allow the slot to be temporarily
inconsistent with the length of the data. Also, the S4 class
prevented the correct specification of the S3 inheritance for class
<code>"mts"</code>.)
</p>
<p>
The current behavior (beginning with version 2.8.0 of <font face="Courier New,Courier" color="#666666"><b>R</b></font>) registers
<code>"ts"</code> as an S3 class,  using an S4-style definition (see the
documentation for <code><a href="setOldClass.html">setOldClass</a></code> in the examples section
for an abbreviated listing of how this is done.  The S3
inheritance of <code>"mts"</code> in package <code>stats</code> is also
registered.
These classes, as well as <code>"matrix"</code> and <code>"array"</code> should
be valid in most examples as superclasses for new S4 class
definitions.
</p>


<h3>Extends</h3>

<p>
The specific classes all extend class <code>"structure"</code>, directly, and
class <code>"vector"</code>, by class <code>"structure"</code>.
</p>


<h3>Methods</h3>

<dl>
<dt>coerce</dt><dd>Methods are defined to coerce arbitrary objects to
these classes, by calling the corresponding basic function, for
example, <code>as(x, "matrix")</code> calls <code>as.matrix(x)</code>.
If <code>strict = TRUE</code> in the call to <code>as()</code>, the method
goes on to delete all other slots and attributes other than the
<code>dim</code> and <code>dimnames</code>.
</dd>
<dt>Ops</dt><dd>Group methods (see, e.g., <code><a href="S4groupGeneric.html">S4groupGeneric</a></code>)
are defined for combinations of structures and vectors (including
special cases for array and matrix), implementing the concept of
vector structures as in the reference.  Essentially, structures
combined with vectors retain the structure as long as the
resulting object has the same length.  Structures combined with
other structures remove the structure, since there is no
automatic way to determine what should happen to the slots
defining the structure.
</p>
<p>
Note that these methods will be activated when a package is loaded
containing a class that inherits from any of the structure
classes or class <code>"vector"</code>.
</dd>
</dl>

<h3>References</h3>

<p>
Chambers, John M. (2008)
<EM>Software for Data Analysis: Programming with R</EM>
Springer.  (For the R version.)
</p>
<p>
Chambers, John M. (1998)
<EM>Programming with Data</EM>
Springer (For the original S4 version.)
</p>
<p>
Becker, R. A., Chambers, J. M. and Wilks, A. R. (1988)
<EM>The New S Language</EM>.
Wadsworth &amp; Brooks/Cole (for the original vector structures).
</p>


<h3>See Also</h3>

<p>
Class <a href="nonStructure-class.html">nonStructure</a>, which enforces the
alternative model, in which all slots are dropped if any math
transformation or operation is applied to an object from a class extending one of
the basic classes.
</p>


<h3>Examples</h3>

<pre>
showClass("structure")

## explore a bit :
showClass("ts")
(ts0 &lt;- new("ts"))
str(ts0)

showMethods("Ops") # six methods from these classes, but maybe many more
</pre>



<hr><div align="center">[Package <em>methods</em> version 2.9.2 <a href="00Index.html">Index</a>]</div>

</body></html>
