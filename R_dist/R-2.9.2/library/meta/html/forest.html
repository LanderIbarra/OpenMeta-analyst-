<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Forest plot (new plot function for objects of class meta)</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for forest {meta}"><tr><td>forest {meta}</td><td align="right">R Documentation</td></tr></table>
<h2>Forest plot (new plot function for objects of class meta)</h2>


<h3>Description</h3>

<p>
Draws a forest plot in the active graphics window (using grid
graphics system).
</p>


<h3>Usage</h3>

<pre>
forest(x, byvar=x$byvar, bylab=x$bylab,
       print.byvar=x$print.byvar, sortvar, studlab=TRUE,
       level=x$level, level.comb=x$level.comb,
       comb.fixed=x$comb.fixed, comb.random=x$comb.random,
       overall=TRUE,
       text.fixed="Fixed effect model", text.random="Random effects model",
       lty.fixed=2, lty.random=3, xlab=NULL, xlab.pos=ref, xlim,
       allstudies=TRUE,
       weight,
       ref=ifelse(x$sm %in% c("RR", "OR", "HR"), 1, 0),
       leftcols=NULL, rightcols=NULL,
       leftlabs=NULL, rightlabs=NULL,
       lab.e=x$label.e, lab.c=x$label.c,
       lab.e.attach.to.col=NULL, lab.c.attach.to.col=NULL,
       lwd=1,
       at=NULL, label=TRUE,
       fontsize=12, boxsize=0.8,
       plotwidth=unit(6, "cm"), colgap=unit(2, "mm"),
       col.i="black", col.by="darkgray", digits=2)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>x</code></td>
<td>
An object of class <code>meta</code>.</td></tr>
<tr valign="top"><td><code>byvar</code></td>
<td>
An optional vector containing grouping information (must
be of same length as <code>x$TE</code>). Parameter <code>byvar</code> can not be
used if <code>x</code> is an object of class <code>metacum</code> or
<code>metainf</code>.</td></tr>
<tr valign="top"><td><code>bylab</code></td>
<td>
A character string with a label for the grouping variable.</td></tr>
<tr valign="top"><td><code>print.byvar</code></td>
<td>
A logical indicating whether the name of the grouping
variable should be printed in front of the group labels.</td></tr>
<tr valign="top"><td><code>sortvar</code></td>
<td>
An optional vector used to sort the individual studies
(must be of same length as <code>x$TE</code>).</td></tr>
<tr valign="top"><td><code>studlab</code></td>
<td>
A logical indicating whether study labels should be
printed in the graph. A vector with study labels can also be
provided (must be of same length as <code>x$TE</code> then).</td></tr>
<tr valign="top"><td><code>level</code></td>
<td>
The level used to calculate confidence intervals for
individual studies.</td></tr>
<tr valign="top"><td><code>level.comb</code></td>
<td>
The level used to calculate confidence intervals for
pooled estimates.</td></tr>
<tr valign="top"><td><code>comb.fixed</code></td>
<td>
A logical indicating whether fixed effect estimate
should be plotted.</td></tr>
<tr valign="top"><td><code>comb.random</code></td>
<td>
A logical indicating whether random effects estimate
should be plotted.</td></tr>
<tr valign="top"><td><code>overall</code></td>
<td>
A logical indicating whether overall summaries should
be plotted. This parameter is useful in combination with the
parameter <code>byvar</code> if summaries should only be plotted on group
level.</td></tr>
<tr valign="top"><td><code>text.fixed</code></td>
<td>
A character string used in the plot to label the
pooled fixed effect estimate.</td></tr>
<tr valign="top"><td><code>text.random</code></td>
<td>
A character string used in the plot to label the
pooled random effects estimate.</td></tr>
<tr valign="top"><td><code>lty.fixed</code></td>
<td>
Line type (pooled fixed effect estimate).</td></tr>
<tr valign="top"><td><code>lty.random</code></td>
<td>
Line type (pooled random effects estimate).</td></tr>
<tr valign="top"><td><code>xlab</code></td>
<td>
A label for the x axis.</td></tr>
<tr valign="top"><td><code>xlab.pos</code></td>
<td>
A numeric specifying the center of the label
on the x axis.</td></tr>
<tr valign="top"><td><code>xlim</code></td>
<td>
The x limits (min,max) of the plot.</td></tr>
<tr valign="top"><td><code>allstudies</code></td>
<td>
A logical indicating whether studies with inestimable
treatment effects should be plotted.</td></tr>
<tr valign="top"><td><code>weight</code></td>
<td>
A character string indicating which type of plotting
symbols is to be used for individual treatment estimates. One of
missing (see Details), <code>"same"</code>, <code>"fixed"</code>, or
<code>"random"</code>, can be abbreviated. Plot symbols have the same size
for all studies or represent study weights from fixed effect or
random effects model.</td></tr>
<tr valign="top"><td><code>ref</code></td>
<td>
A numerical giving the reference value to be plotted as a
line in the forest plot. No reference line is plotted if parameter
<code>ref</code> is equal to <code>NA</code>.</td></tr>
<tr valign="top"><td><code>leftcols</code></td>
<td>
A character vector specifying (additional) columns to
be plotted on the left side of the forest plot (see Details).</td></tr>
<tr valign="top"><td><code>rightcols</code></td>
<td>
A character vector specifying (additional) columns to
be plotted on the right side of the forest plot (see Details).</td></tr>
<tr valign="top"><td><code>leftlabs</code></td>
<td>
A character vector specifying labels for (additional)
columns on left side of the forest plot (see Details).</td></tr>
<tr valign="top"><td><code>rightlabs</code></td>
<td>
A character vector specifying labels for (additional)
columns on right side of the forest plot (see Details).</td></tr>
<tr valign="top"><td><code>lab.e</code></td>
<td>
Label to be used for experimental group in table
heading.</td></tr>
<tr valign="top"><td><code>lab.c</code></td>
<td>
Label to be used for control group in table
heading.</td></tr>
<tr valign="top"><td><code>lab.e.attach.to.col</code></td>
<td>
A character specifying the column name where
label <code>lab.e</code> should be attached to in table heading.</td></tr>
<tr valign="top"><td><code>lab.c.attach.to.col</code></td>
<td>
A character specifying the column name where
label <code>lab.c</code> should be attached to in table heading.</td></tr>
<tr valign="top"><td><code>lwd</code></td>
<td>
The line width, see <code><a href="../../graphics/html/par.html">par</a></code>.</td></tr>
<tr valign="top"><td><code>at</code></td>
<td>
The points at which tick-marks are to be drawn, see
<code>grid.xaxis</code>.</td></tr>
<tr valign="top"><td><code>label</code></td>
<td>
A logical value indicating whether to draw the
labels on the tick marks, or an expression or character vector which
specify the labels to use. See <code><a href="../../grid/html/grid.xaxis.html">grid.xaxis</a></code>.</td></tr>
<tr valign="top"><td><code>fontsize</code></td>
<td>
The size of text (in points), see <code><a href="../../grid/html/gpar.html">gpar</a></code>.</td></tr>
<tr valign="top"><td><code>boxsize</code></td>
<td>
A numeric used to increase or decrease the size of
boxes in the forest plot.</td></tr>
<tr valign="top"><td><code>plotwidth</code></td>
<td>
A unit object specifying width of the forest plot.</td></tr>
<tr valign="top"><td><code>colgap</code></td>
<td>
A unit object specifying gap between columns printed on
left and right side of forest plot.</td></tr>
<tr valign="top"><td><code>col.i</code></td>
<td>
The colour for individual study results and confidence limits.</td></tr>
<tr valign="top"><td><code>col.by</code></td>
<td>
A character specifying colour to print information on
subgroups.</td></tr>
<tr valign="top"><td><code>digits</code></td>
<td>
Minimal number of significant digits, see
<code>print.default</code>.</td></tr>
</table>

<h3>Details</h3>

<p>
A forest plot, also called confidence interval plot, is drawn in the
active graphics window. Sub-group analyses are conducted and
displayed in the plot if <code>byvar</code> is not missing.
</p>
<p>
The <code>forest</code> function is based on the grid graphics
system. Therefore, to plot a new figure in an existing graphics
window, one has to use the <code><a href="../../grid/html/grid.newpage.html">grid.newpage</a></code> function. In
order to print the forest plot, (i) resize the graphics window,
(ii) either use <code><a href="../../grDevices/html/dev2.html">dev.copy2eps</a></code> or
<code><a href="../../grDevices/html/dev2.html">dev.copy2pdf</a></code>. For basic forest plots, the
<code><a href="plot.meta.html">plot.meta</a></code> function can be used.
</p>
<p>
Information from object <code>x</code> is utilised if argument <code>weight</code>
is missing. Weights from the fixed effect model are used
(<code>weight="fixed"</code>) if parameter <code>x$comb.fixed</code> is
<code>TRUE</code>; weights from the random effects model are used
(<code>weight="random"</code>) if parameter <code>x$comb.random</code>
is <code>TRUE</code> and <code>x$comb.fixed</code> is <code>FALSE</code>.
</p>
<p>
The parameters <code>leftcols</code> and <code>rightcols</code> can be used to
specify columns which are plotted on the left and right side of the
forest plot, respectively. If these parameters are <code>NULL</code>, the
following default columns will be plotted.
</p>
<p>
Parameter <code>rightcols</code>: (i) estimated treatment effect with
<code>level</code>-confidence interval, (ii) in addition, weights of the
fixed and/or random effects model will be given, if
<code>comb.fixed=TRUE</code> and/or <code>comb.random=TRUE</code>. For an object
of class <code>metacum</code> or <code>metainf</code> only the estimated treatment
effect with <code>level</code>-confidence interval are plotted.
</p>
<p>
Parameter <code>leftcols</code>:
(i) <code>leftcols=c("studlab", "event.e", "n.e", "event.c", "n.c")</code>
for an object of class <code>metabin</code>,
(ii) <code>leftcols=c("studlab", "n.e", "mean.e", "sd.e", "n.c",
    "mean.c", "sd.c")</code> for an object of class <code>metacont</code>,
(iii) <code>leftcols=c("studlab", "TE", "seTE")</code>
for an object of class <code>metagen</code>,
(iv) <code>leftcols=c("studlab", "event", "n")</code>
for an object of class <code>metaprop</code>,
(v) <code>leftcols=c("studlab")</code>
for an object of class <code>metacum</code> or <code>metainf</code>.
</p>
<p>
The parameters <code>leftlabs</code> and <code>rightlabs</code> can be used to
specify column headings which are plotted on left and right side of
the forest plot, respectively. For certain columns predefined labels
exist. If the parameters <code>leftlabs</code> and <code>rightlabs</code> are
<code>NULL</code>, the following default labels will be used: for columns
<code>c("studlab", "TE", "seTE", "n.e", "n.c", "event.e", "event.c",
  "mean.e", "mean.c", "sd.e", "sd.c", "effect", "ci", "w.fixed",
  "w.random")</code> the labels <code>c("Study", "TE", "seTE", "Total",
  "Total", "Events", "Events", "Mean", "Mean", "SD", "SD",
  summary measure, level for confidence interval, "W(fixed)",
  "W(random)")</code>. For additional columns the column name
will be used as label. It is possible to only provide labels for new
columns (see Examples).
</p>
<p>
If parameters <code>lab.e</code> and <code>lab.c</code> are <code>NULL</code>,
"Experimental" and "Control" are used as labels for experimental and
control group, respectively.
</p>
<p>
For subgroups (argument <code>byvar</code> not <code>NULL</code>), results for the
fixed effect model will be plotted if both arguments <code>comb.fixed</code>
and <code>comb.random</code> are <code>TRUE</code>. In order to plot results for
the random effects model within subgroups, use
<code>comb.fixed==FALSE</code> and <code>comb.random==TRUE</code>.
</p>
<p>
Review Manager 5 (RevMan 5) is the current software used for
preparing and maintaining Cochrane Reviews
(<a href="http://www.cc-ims.net/revman/">http://www.cc-ims.net/revman/</a>). In RevMan 5, subgroup analyses
can be defined and data from a Cochrane review can be imported to R using the
function <code>read.rm5</code>. If a meta-analysis is then conducted using
function <code>metacr</code>, information on subgroups is available in R
(components <code>byvar</code>, <code>bylab</code>, and <code>print.byvar</code>,
<code>byvar</code> in an object of class <code>"meta"</code>). Accordingly, by using function
<code>metacr</code> there is no need to define subgroups in order to redo
the statistical analysis conducted in the Cochrane review.
</p>


<h3>Author(s)</h3>

<p>
Guido Schwarzer <a href="mailto:sc@imbi.uni-freiburg.de">sc@imbi.uni-freiburg.de</a>
</p>


<h3>See Also</h3>

<p>
<code><a href="plot.meta.html">plot.meta</a></code>, <code><a href="metabin.html">metabin</a></code>, <code><a href="metacont.html">metacont</a></code>, <code><a href="metagen.html">metagen</a></code>
</p>


<h3>Examples</h3>

<pre>
data(Olkin95)
meta1 &lt;- metabin(event.e, n.e, event.c, n.c,
                 data=Olkin95, subset=c(41,47,51,59),
                 sm="RR", meth="I",
                 studlab=paste(author, year))

grid.newpage()
##
## Do forest plot
##
forest(meta1, comb.fixed=TRUE, comb.random=TRUE)

grid.newpage()
##
## Change set of columns printed on left side
## of forest plot
##
forest(meta1, comb.fixed=TRUE, comb.random=FALSE,
       leftcols="studlab")

grid.newpage()
##
## 1. Change order of columns on left side
## 2. Attach labels to columns 'event.e' and 'event.c'
##    instead of columns 'n.e' and 'n.c'
##
forest(meta1,
       leftcols=c("studlab", "n.e", "event.e", "n.c", "event.c"),
       lab.e.attach.to.col="event.e",
       lab.c.attach.to.col="event.c",
       comb.fixed=TRUE)

Olkin95$studlab &lt;- paste(Olkin95$author, Olkin95$year)
##
## Add variables 'year' and 'author' to meta-analysis object
##
meta1$year &lt;- addvar(meta1, Olkin95, "year")
meta1$author &lt;- addvar(meta1, Olkin95, "author")

grid.newpage()
##
## Specify column labels only for newly created variables
## 'year' and 'author'
##
forest(meta1,
       leftcols=c("studlab", "event.e", "n.e", "event.c", "n.c",
                  "author", "year"),
       leftlabs=c("Author", "Year of Publ"),
       comb.fixed=TRUE)
</pre>



<hr><div align="center">[Package <em>meta</em> version 1.1-8 <a href="00Index.html">Index</a>]</div>

</body></html>
