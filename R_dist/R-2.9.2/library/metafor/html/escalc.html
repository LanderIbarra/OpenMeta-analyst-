<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>R: Calculate Effect Size and Outcome Measures</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="../../R.css">
</head><body>

<table width="100%" summary="page for escalc {metafor}"><tr><td>escalc {metafor}</td><td align="right">R Documentation</td></tr></table>
<h2>Calculate Effect Size and Outcome Measures</h2>


<h3>Description</h3>

<p>
The function calculates various effect size and outcome measures that are commonly used in meta-analyses. The corresponding sampling variances are also calculated.
</p>


<h3>Usage</h3>

<pre>
escalc(measure, ai, bi, ci, di, n1i, n2i, m1i, m2i, sd1i, sd2i, 
       xi, mi, ri, ni, data=NULL, add=1/2, to="only0", vtype="LS")
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>measure</code></td>
<td>
a character string indicating which effect size or outcome measure should be calculated. See &lsquo;Details&rsquo; for possible options and what arguments below should then be specified.</td></tr>
<tr valign="top"><td><code>ai</code></td>
<td>
vector to specify 2x2 table frequencies (upper left cell).</td></tr>
<tr valign="top"><td><code>bi</code></td>
<td>
vector to specify 2x2 table frequencies (upper right cell).</td></tr>
<tr valign="top"><td><code>ci</code></td>
<td>
vector to specify 2x2 table frequencies (lower left cell).</td></tr>
<tr valign="top"><td><code>di</code></td>
<td>
vector to specify 2x2 table frequencies (lower right cell).</td></tr>
<tr valign="top"><td><code>n1i</code></td>
<td>
vector to specify group sizes or row total (first group/row).</td></tr>
<tr valign="top"><td><code>n2i</code></td>
<td>
vector to specify group sizes or row total (second group/row).</td></tr>
<tr valign="top"><td><code>m1i</code></td>
<td>
vector to specify means (first group).</td></tr>
<tr valign="top"><td><code>m2i</code></td>
<td>
vector to specify means (second group).</td></tr>
<tr valign="top"><td><code>sd1i</code></td>
<td>
vector to specify standard deviations (first group).</td></tr>
<tr valign="top"><td><code>sd2i</code></td>
<td>
vector to specify standard deviations (second group).</td></tr>
<tr valign="top"><td><code>xi</code></td>
<td>
vector to specify frequencies of the event of interest.</td></tr>
<tr valign="top"><td><code>mi</code></td>
<td>
vector to specify frequencies of the complement of the event of interest.</td></tr>
<tr valign="top"><td><code>ri</code></td>
<td>
vector to specify the raw correlation coefficients.</td></tr>
<tr valign="top"><td><code>ni</code></td>
<td>
vector to specify the sample sizes.</td></tr>
<tr valign="top"><td><code>data</code></td>
<td>
an optional data frame containing the variables given to the arguments above.</td></tr>
<tr valign="top"><td><code>add</code></td>
<td>
See &lsquo;Details&rsquo;.</td></tr>
<tr valign="top"><td><code>to</code></td>
<td>
See &lsquo;Details&rsquo;.</td></tr>
<tr valign="top"><td><code>vtype</code></td>
<td>
See &lsquo;Details&rsquo;.</td></tr>
</table>

<h3>Details</h3>

<p>
<B>Raw and Standardized Mean Difference</B>
</p>
<p>
The raw mean difference and standardized mean difference are useful effect size measure when meta-analyzing a set of studies comparing two groups (e.g., treatment and control groups) with respect to some quantitative (and ideally normally distributed) dependent variable. For these outcome measures, <code>m1i</code> and <code>m2i</code> denote the means of the two groups, <code>sd1i</code> and <code>sd2i</code> the standard deviations of the scores in the two groups, and <code>n1i</code> and <code>n2i</code> the sample sizes of the two groups.
<ul>
<li><code>"MD"</code>: The <EM>raw mean difference</EM> is equal to <code>m1i-m2i</code>.
<li><code>"SMD"</code>: The <EM>standardized mean difference</EM> is equal to <code>(m1i-m2i)/spi</code>, where <code>spi</code> is the pooled standard deviation of the two groups (which is calculated inside of the function). The standardized mean difference is automatically corrected for its slight positive bias within the function (see Hedges &amp; Olkin, 1985). When <code>vtype="LS"</code>, the sampling variances are calculated based on the large sample approximation. Alternatively, the unbiased estimates of the sampling variances can be obtained with <code>vtype="UB"</code>.
</ul>

<p>
<B>Effect Size and Outcome Measures for 2x2 Table Data</B>
</p>
<p>
Studies providing data in terms of 2x2 tables call for other outcome measures. In particular, assume that we have tables of the form:
<table summary="Rd table">
<tr>
  <td align="left"></td>  <td align="center"> outcome 1 </td>  <td align="center"> outcome 2 </td>  <td align="center"> total </td>
</tr>
<tr>
  <td align="left"> group 1 </td>  <td align="center"> <code>ai</code> </td>  <td align="center"> <code>bi</code> </td>  <td align="center"> <code>n1i</code> </td>
</tr>
<tr>
  <td align="left"> group 2 </td>  <td align="center"> <code>ci</code> </td>  <td align="center"> <code>di</code> </td>  <td align="center"> <code>n2i</code> </td>
</tr>
</table>
<p>
where <code>ai</code>, <code>bi</code>, <code>ci</code>, and <code>di</code> denote the cell frequencies and <code>n1i</code> and <code>n2i</code> the row totals. For example, in a set of RCTs, group 1 and group 2 may refer to the treatment and placebo group, with outcome 1 denoting some event of interest and outcome 2 its complement. In a set of case-control studies, group 1 and group 2 may refer to the group of cases and the group of controls, with outcome 1 denoting, for example, exposure to some risk factor and outcome 2 non-exposure. The 2x2 table may also be the result of cross-sectional (i.e., multinomial) sampling, so that none of the table margins (except the total sample size) are fixed through the study design.
</p>
<p>
Depending on the type of design (sampling method), a meta-analysis of 2x2 table data can be based on one of several different outcome measures, including the odds ratio, the risk ratio (also called relative risk), the risk difference, and the arc-sine transformed risk difference. The phi coefficient, Yule's Q, and Yule's Y are additional measures of association for 2x2 table data (but they may not be the most ideal choices for meta-analyses of such data). For these measures, one needs to supply either <code>ai</code>, <code>bi</code>, <code>ci</code>, and <code>di</code> or alternatively <code>ai</code>, <code>ci</code>, <code>n1i</code>, and <code>n2i</code>. Note that the log is taken of the risk and the odds ratio, which makes these outcome measures symmetric about 0 and helps to make the distribution of these outcome measure closer to normal.
<ul>
<li><code>"RR"</code>: The <EM>log relative risk</EM> is equal to the log of <code>(ai/n1i)/(ci/n2i)</code>.
<li><code>"OR"</code>: The <EM>log odds ratio</EM> is equal to the log of <code>(ai*di)/(bi*di)</code>.
<li><code>"RD"</code>: The <EM>risk difference</EM> is equal to <code>(ai/n1i)-(ci/n2i)</code>.
<li><code>"AS"</code>: The <EM>arc-sine transformed risk difference</EM> is equal to <code>asin(sqrt(ai/n1i)) - asin(sqrt(ci/n2i))</code>. See Ruecker et al. (2009) for a discussion of this and other outcome measures for 2x2 table data.
<li><code>"PETO"</code>: The <EM>log odds ratio estimated with Peto's method</EM> (see Yusuf et al., 1985) is equal to <code>(ai-si*n1i/ni)/((si*ti*n1i*n2i)/(ni^2*(ni-1)))</code>, where <code>si=ai+ci</code>, <code>ti=bi+di</code>, and <code>ni=n1i+n2i</code>. Note that this measure technically assumes that the true odds ratio is equal to 1 in all tables.
<li><code>"PHI"</code>: The <EM>phi coefficient</EM> is equal to <code>(ai*di-bi*ci)/sqrt(n1i*n2i*si*ti)</code>, where <code>si=ai+ci</code> and <code>ti=bi+di</code>.
<li><code>"YUQ"</code>: <EM>Yule's Q</EM> is equal to <code>(oi-1)/(oi+1)</code>, where <code>oi</code> is the odds ratio.
<li><code>"YUY"</code>: <EM>Yule's Y</EM> is equal to <code>(sqrt(oi)-1)/(sqrt(oi)+1)</code>, where <code>oi</code> is the odds ratio.
</ul> Cell entries with a zero can be problematic, especially for the risk and the odds ratio. Adding a constant to the cells of the 2x2 tables is a common solution to this problem. When <code>to="all"</code>, the value of <code>add</code> is added to each cell of the 2x2 tables in all <i>k</i> tables. When <code>to="only0"</code>, the value of <code>add</code> is added to each cell of the 2x2 tables only in those tables with at least one cell equal to 0. When <code>to="if0all"</code>, the value of <code>add</code> is added to each cell of the 2x2 tables in all <i>k</i> tables, but only when there is at least one 2x2 table with a zero entry. Setting <code>to="none"</code> or <code>add=0</code> has the same effect: No adjustment to the observed table frequencies is made. Depending on the outcome measure and the data, this may lead to division by zero inside of the function (when this occurs, the resulting <code>Inf</code> value is recoded to <code>NA</code>).
</p>
<p>
<B>Proportions and Transformations Thereof</B>
</p>
<p>
When the studies provide data for a single group with respect to a dichotomous dependent variable, then the raw proportion, log transformed proportion, logit transformed proportion (i.e., log odds), the arc-sine transformed proportion, and the Freeman-Tukey double arc-sine transformed proportion are useful outcome measures. Here, one needs to specify <code>xi</code> and <code>ni</code>, denoting the number of individuals experiencing the event of interest and the total number of individuals, respectively. Instead of specifying <code>ni</code>, one can use <code>mi</code> to specify the number of individuals that do not experience the event of interest.
<ul>
<li><code>"PR"</code>: The <EM>raw proportion</EM> is equal to <code>xi/ni</code>.
<li><code>"PLN"</code>: The <EM>log transformed proportion</EM> is equal to the log of <code>xi/ni</code>.
<li><code>"PLO"</code>: The <EM>logit transformed proportion</EM> is equal to the log of <code>xi/(ni-xi)</code>.
<li><code>"PAS"</code>: The arc-sine transformation is a variance stabilizing transformation for proportions. The <EM>arc-sine transformed proportion</EM> is equal to <code>asin(sqrt(xi/ni))</code>.
<li><code>"PFT"</code>: Yet another variance stabilizing transformation for proportions was suggested by Freeman &amp; Tukey (1950). The <EM>Freeman-Tukey double arc-sine transformed proportion</EM> is equal to <code>1/2*(asin(sqrt(xi/(ni+1))) + asin(sqrt((xi+1)/(ni+1))))</code>.
</ul> Again, zero cell entries can be problematic. When <code>to="all"</code>, the value of <code>add</code> is added to <code>xi</code> and <code>mi</code> in all <i>k</i> studies. When <code>to="only0"</code>, the value of <code>add</code> is added only for studies where the <code>xi</code> or <code>mi</code> is equal to 0. When <code>to="if0all"</code>, the value of <code>add</code> is added in all <i>k</i> studies, but only when there is at least one study with a zero value for <code>xi</code> or <code>mi</code>. Setting <code>to="none"</code> or <code>add=0</code> again means that no adjustment to the observed values is made.
</p>
<p>
<B>Raw and Transformed Correlation Coefficient</B>
</p>
<p>
Another frequently used outcome measure in meta-analyses is the correlation coefficient. Here, one needs to specify <code>ri</code>, the vector with the raw correlation coefficients, and <code>ni</code>, the corresponding sample sizes.
<ul>
<li><code>"COR"</code>: The <EM>raw correlation coefficient</EM> is simply equal to <code>ri</code> as supplied to the function. When <code>vtype="LS"</code>, the sampling variances are calculated based on the large sample approximation. Alternatively, an approximation to the unbiased estimates of the sampling variances can be obtained with <code>vtype="UB"</code> (see Hedges, 1989).      
<li><code>"UCOR"</code>: The <EM>unbiased estimate of the correlation coefficient</EM> is obtained by correcting the raw correlation coefficient for its slight negative bias (based on equation 2.7 in Olkin &amp; Pratt, 1958). Again, <code>vtype="LS"</code> and <code>vtype="UB"</code> can be used to choose between the large sample approximations or the approximately unbiased estimates of the sampling variances.
<li><code>"ZCOR"</code>: Fisher's r-to-z transformation is a variance stabilizing transformation for correlation coefficients with the added benefit of also being a rather effective normalizing transformation (Fisher, 1921). The <EM>Fisher's r-to-z transformed correlation coefficient</EM> is equal to <code>1/2*log((1+ri)/(1-ri))</code>.
</ul>

<h3>Value</h3>

<p>
A data frame with the following elements:
</p>
<table summary="R argblock">
<tr valign="top"><td><code>yi</code></td>
<td>
value of the effect size or outcome measure.</td></tr>
<tr valign="top"><td><code>vi</code></td>
<td>
corresponding (estimated) sampling variance.</td></tr>
</table>

<h3>Author(s)</h3>

<p>
Wolfgang Viechtbauer; <a href="mailto:wvb@www.wvbauer.com">wvb@www.wvbauer.com</a>; <a href="http://www.wvbauer.com/">http://www.wvbauer.com/</a>
</p>


<h3>References</h3>

<p>
Cooper, H. C. &amp; Hedges, L. V. (1994) <EM>The handbook of research synthesis</EM>. New York: Russell Sage Foundation.
</p>
<p>
Fisher, R. A. (1921) On the &ldquo;probable error&rdquo; of a coefficient of correlation deduced from a small sample. <EM>Metron</EM>, <B>1</B>, 1&ndash;32.
</p>
<p>
Freeman, M. F. &amp; Tukey, J. W. (1950) Transformations related to the angular and the square root. <EM>Annals of Mathematical Statistics</EM>, <B>21</B>, 607&ndash;611.
</p>
<p>
Hedges, L. V. (1989) An unbiased correction for sampling error in validity generalization studies. <EM>Journal of Applied Psychology</EM>, <B>74</B>, 469&ndash;477.
</p>
<p>
Hedges, L. V. &amp; Olkin, I. (1985) <EM>Statistical methods for meta-analysis</EM>. San Diego, CA: Academic Press.
</p>
<p>
Ruecker, G., Schwarzer, G., Carpenter, J. &amp; Olkin, I. (2009) Why add anything to nothing? The arcsine difference as a measure of treatment effect in meta-analysis with zero cells. <EM>Statistics in Medicine</EM>, <B>28</B>, 721&ndash;738.
</p>
<p>
Olkin, I. &amp; Pratt, J. W. (1958) Unbiased estimation of certain correlation coefficients. <EM>Annals of Mathematical Statistics</EM>, <B>29</B>, 201&ndash;211.
</p>
<p>
Yusuf, S., Peto, R., Lewis, J., Collins, R. &amp; Sleight, P. (1985) Beta blockade during and after myocardial infarction: An overview of the randomized trials. <EM>Progress in Cardiovascular Disease</EM>, <B>27</B>, 335&ndash;371.
</p>


<h3>See Also</h3>

<p>
<code><a href="rma.uni.html">rma.uni</a></code>, <code><a href="rma.mh.html">rma.mh</a></code>, <code><a href="rma.peto.html">rma.peto</a></code>
</p>


<h3>Examples</h3>

<pre>
### load BCG vaccine data
data(dat.bcg)

### calculate log risk ratios and corresponding sampling variances
dat &lt;- escalc(measure="RR", ai=tpos, bi=tneg, ci=cpos, di=cneg, data=dat.bcg)

### add log risk ratios and sampling variances to the data frame
dat &lt;- cbind(dat.bcg, dat)
dat
</pre>



<hr><div align="center">[Package <em>metafor</em> version 0.5-7 <a href="00Index.html">Index</a>]</div>

</body></html>
